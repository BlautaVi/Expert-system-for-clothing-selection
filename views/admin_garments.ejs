<%- include('partials/header') %>
<div class="admin-container">
    <h2>Керування типами одягу (База знань)</h2>

    <div class="card p-4 mb-4">
        <h4>Додати новий тип одягу</h4>
        <form action="/admin/garments/add" method="POST">
            <div class="row g-3 align-items-end">
                <div class="col-md-3">
                    <label class="form-label">Назва</label>
                    <input type="text" name="name" class="form-control" required>
                </div>
                <div class="col-md-2">
                    <label class="form-label">Базова витрата (м)</label>
                    <input type="number" step="0.1" name="base_consumption" class="form-control" required>
                </div>
                <div class="col-md-2">
                    <label class="form-label">Стать</label>
                    <select name="gender" class="form-select" required>
                        <option value="жіночий">Жіночий</option>
                        <option value="чоловічий">Чоловічий</option>
                        <option value="унісекс">Унісекс</option>
                    </select>
                </div>
                <div class="col-md-5">
                    <label class="form-label">Доступні фасони (через кому)</label>
                    <input type="text" name="available_fits" class="form-control" required>
                </div>
            </div>
            <div class="row mt-3">
                <div class="col-12">
                    <label class="form-label">Необхідні мірки для розрахунку</label>
                    <div>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input" type="checkbox" name="required_final_details" value="height" id="check_height">
                            <label class="form-check-label" for="check_height">Зріст</label>
                        </div>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input" type="checkbox" name="required_final_details" value="bust" id="check_bust">
                            <label class="form-check-label" for="check_bust">Обхват грудей</label>
                        </div>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input" type="checkbox" name="required_final_details" value="hips" id="check_hips">
                            <label class="form-check-label" for="check_hips">Обхват стегон</label>
                        </div>
                    </div>
                </div>
            </div>
            <button type="submit" class="btn btn-success mt-3">Додати одяг</button>
        </form>
    </div>

    <table class="table table-bordered">
        <thead><tr><th>Назва</th><th>Витрата</th><th>Стать</th><th>Фасони</th><th>Потрібні мірки</th><th>Дії</th></tr></thead>
        <tbody>
        <% (garments || []).forEach(g => { %>
            <tr>
                <td><%= g.name %></td>
                <td><%= g.base_consumption %> м</td>
                <td><%= g.gender %></td>
                <td><%= (g.available_fits || []).join(', ') %></td>
                <td><%= (g.required_final_details || []).join(', ') %></td>
                <td>
                    <form action="/admin/garments/delete/<%= g.id %>" method="POST" style="display:inline;">
                        <button type="submit" class="btn btn-danger btn-sm">Видалити</button>
                    </form>
                </td>
                <td><%= (g.available_fits || []).map(f => f.name).join(', ') %></td>
                <td><%= (g.required_final_details || []).join(', ') %></td>
                <td>
                    <a href="/admin/garments/edit/<%= g.id %>" class="btn btn-primary btn-sm">Редагувати</a>
                    <form action="/admin/garments/delete/<%= g.id %>" method="POST" style="display:inline;">
                        <button type="submit" class="btn btn-danger btn-sm">Видалити</button>
                    </form>
                </td>
            </tr>
        <% }); %>
        </tbody>
    </table>
</div>
<%- include('partials/footer') %>